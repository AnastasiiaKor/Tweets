"use strict";(self.webpackChunktweets=self.webpackChunktweets||[]).push([[261],{261:function(e,t,n){n.r(t),n.d(t,{default:function(){return S}});var r=n(439),a=n(87),s=n(791),o=n(413),l=n(433),u=n(861),c=n(687),i=n.n(c),f=n(243);function p(){return d.apply(this,arguments)}function d(){return(d=(0,u.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.Z)("tweets-app");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return h.apply(this,arguments)}function h(){return(h=(0,u.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.put("tweets-app/".concat(t.id),{name:t.name,avatar:t.avatar,followers:t.followers+1,tweets:t.tweets});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=(0,u.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.put("tweets-app/".concat(t.id),{name:t.name,avatar:t.avatar,followers:t.followers-1,tweets:t.tweets});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f.Z.defaults.baseURL="https://6444295a90738aa7c0807feb.mockapi.io/";var g=n(184);function m(e){var t=e.user,n=e.follow,r=e.unfollow,a=e.followedUsers;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{children:(0,g.jsx)("img",{src:t.avatar,alt:t.name})}),(0,g.jsx)("p",{children:t.name}),(0,g.jsxs)("p",{children:[t.tweets," Tweets"]}),(0,g.jsxs)("p",{children:[" ",t.followers.toLocaleString("en-US")," Followers"]}),a.includes(t.id)?(0,g.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"Following"}):(0,g.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"Follow"})]})}function b(e){var t=e.selectedOption,n=(0,s.useState)([]),a=(0,r.Z)(n,2),c=a[0],f=a[1],d=(0,s.useState)(3),h=(0,r.Z)(d,2),x=h[0],b=h[1],j=(0,s.useState)(JSON.parse(localStorage.getItem("followedUsersIds"))||[]),Z=(0,r.Z)(j,2),k=Z[0],y=Z[1],S=(0,s.useState)([]),C=(0,r.Z)(S,2),F=C[0],U=C[1];(0,s.useEffect)((function(){function e(){return(e=(0,u.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p();case 3:t=e.sent,f(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,s.useEffect)((function(){if("all"===t)U(c);else if("following"===t){var e=c.filter((function(e){return k.includes(e.id)}));U(e)}else if("follow"===t){var n=c.filter((function(e){return!k.includes(e.id)}));U(n)}}),[t,c,k]);var I=F.slice(0,x);function O(e){var t=[].concat((0,l.Z)(k),[e.id]);function n(){return n=(0,u.Z)(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t);case 3:n=e.sent,r=n.id,a={followers:n.followers},J(r,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),n.apply(this,arguments)}y(t),localStorage.setItem("followedUsersIds",JSON.stringify(t)),function(e){n.apply(this,arguments)}(e)}function L(e){var t=k.filter((function(t){return t!==e.id}));function n(){return n=(0,u.Z)(i().mark((function e(t){var n,r,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t);case 3:n=e.sent,r=n.id,a={followers:n.followers},J(r,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),n.apply(this,arguments)}y(t),localStorage.setItem("followedUsersIds",JSON.stringify(t)),function(e){n.apply(this,arguments)}(e)}function J(e,t){f((function(n){return n.map((function(n){return n.id===e?(0,o.Z)((0,o.Z)({},n),t):n}))}))}return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("ul",{children:I.map((function(e){return(0,g.jsx)("li",{children:(0,g.jsx)(m,{user:e,follow:O,unfollow:L,followedUsers:k})},e.id)}))}),I.length<F.length&&(0,g.jsx)("button",{type:"button",onClick:function(){b(x+3)},children:"Load more"})]})}var j=n(773),Z=[{value:"all",label:"all"},{value:"follow",label:"follow"},{value:"following",label:"following"}],k={value:"all",label:"all"},y=function(e){var t=e.onChange,n=(0,s.useState)(k),a=(0,r.Z)(n,2),o=a[0],l=a[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("p",{children:"Show "}),(0,g.jsx)(j.ZP,{value:o,onChange:function(e){l(e),t(e.value)},options:Z})]})};var S=function(){var e=(0,s.useState)("all"),t=(0,r.Z)(e,2),n=t[0],o=t[1];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.OL,{to:"/",children:"\u2190 Go back"}),(0,g.jsx)("p",{children:" This is tweets"}),(0,g.jsx)(y,{onChange:function(e){o(e)}}),(0,g.jsx)(b,{selectedOption:n})]})}}}]);
//# sourceMappingURL=261.ac33ade6.chunk.js.map